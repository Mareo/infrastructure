---
apiVersion: acid.zalan.do/v1
kind: postgresql
metadata:
  name: in-cluster-main-cluster
spec:
  teamId: in-cluster
  volume:
    size: 10Gi
    storageClass: csi-rbd-sc-retain
  numberOfInstances: 1

  # users: name -> permissions (usually [])
  users:
    nextcloud.nextcloud: []

  # databases: name -> owner
  databases:
    nextcloud: nextcloud.nextcloud

  postgresql:
    version: "14"

  additionalVolumes:
    - name: pgbackup
      mountPath: /home/postgres/pgbackup
      volumeSource:
        emptyDir: {}
